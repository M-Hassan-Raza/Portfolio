<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Obfuscating Images with Django & Azure Cloud Storage | Muhammad Hassan Raza</title>
<meta name=keywords content="Django,Azure,Cloud Storage,Image Obfuscation,Security"><meta name=description content="A deep dive into my Django project that obfuscates images by embedding executable files and storing them securely on Azure Blob Storage."><meta name=author content="Muhammad Hassan Raza"><link rel=canonical href=https://mhassan.dev/projects/pixelcryptor/><link crossorigin=anonymous href=/assets/css/stylesheet.8a3ade16b76d029bb93c7535ae420b50967cea4ec179a2a127223d122193efc7.css integrity="sha256-ijreFrdtApu5PHU1rkILUJZ86k7BeaKhJyI9EiGT78c=" rel="preload stylesheet" as=style><link rel=icon href=https://mhassan.dev/assets/favicon.svg><link rel=icon type=image/png sizes=16x16 href=https://mhassan.dev/assets/favicon.svg><link rel=icon type=image/png sizes=32x32 href=https://mhassan.dev/assets/favicon.svg><link rel=apple-touch-icon href=https://mhassan.dev/apple-touch-icon.png><link rel=mask-icon href=https://mhassan.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://mhassan.dev/projects/pixelcryptor/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=preload href=/css/extended/extended.css as=style><link rel=stylesheet href=/css/extended/extended.css><link rel=preload href=/fonts/font-family.css as=style><link rel=stylesheet href=/fonts/font-family.css><link rel=preload href=/fonts/Manrope-Regular.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/Manrope-Medium.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/Manrope-Bold.woff2 as=font type=font/woff2 crossorigin><script async src=https://cloud.umami.is/script.js data-website-id=30c7d9d6-abac-4c52-b85a-c0234f863d22></script><meta property="og:url" content="https://mhassan.dev/projects/pixelcryptor/"><meta property="og:site_name" content="Muhammad Hassan Raza"><meta property="og:title" content="Obfuscating Images with Django & Azure Cloud Storage"><meta property="og:description" content="A deep dive into my Django project that obfuscates images by embedding executable files and storing them securely on Azure Blob Storage."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="projects"><meta property="article:published_time" content="2025-02-16T00:00:00+00:00"><meta property="article:modified_time" content="2025-02-16T00:00:00+00:00"><meta property="article:tag" content="Django"><meta property="article:tag" content="Azure"><meta property="article:tag" content="Cloud Storage"><meta property="article:tag" content="Image Obfuscation"><meta property="article:tag" content="Security"><meta name=twitter:card content="summary"><meta name=twitter:title content="Obfuscating Images with Django & Azure Cloud Storage"><meta name=twitter:description content="A deep dive into my Django project that obfuscates images by embedding executable files and storing them securely on Azure Blob Storage."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Projects","item":"https://mhassan.dev/projects/"},{"@type":"ListItem","position":2,"name":"Obfuscating Images with Django \u0026 Azure Cloud Storage","item":"https://mhassan.dev/projects/pixelcryptor/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Obfuscating Images with Django \u0026 Azure Cloud Storage","name":"Obfuscating Images with Django \u0026 Azure Cloud Storage","description":"A deep dive into my Django project that obfuscates images by embedding executable files and storing them securely on Azure Blob Storage.","keywords":["Django","Azure","Cloud Storage","Image Obfuscation","Security"],"articleBody":"Obfuscating Images with Django \u0026 Azure Cloud Storage Introduction For a recent project, I developed a Django-based web application that allows users to obfuscate images by embedding executable files within them. The processed images are then stored securely on Azure Blob Storage. This project blends Django’s powerful templating system with Azure’s cloud storage to offer a unique and secure way of handling sensitive data.\nFeatures Upload images and executable files via a Django form. Embed executables within images using a custom obfuscation technique. Store and retrieve obfuscated images on Azure Blob Storage. Deobfuscate images, extracting the original files. Secure file handling and cloud storage integration. Setting Up Azure Blob Storage in Django We start by configuring Azure Blob Storage in our Django project. Using dotenv, we securely load credentials from an .env file:\nfrom azure.storage.blob import BlobServiceClient from dotenv import load_dotenv import os # Load environment variables load_dotenv() AZURE_CONNECTION_STRING = os.getenv(\"AZURE_CONNECTION_STRING\") CONTAINER_NAME = os.getenv(\"CONTAINER_NAME\") # Initialize BlobServiceClient BLOB_SERVICE_CLIENT = BlobServiceClient.from_connection_string(AZURE_CONNECTION_STRING) Uploading Files to Azure Blob Storage A helper function to upload files to Azure Blob Storage:\ndef upload_to_azure_blob(file, blob_name): try: container_client = BLOB_SERVICE_CLIENT.get_container_client(CONTAINER_NAME) blob_client = container_client.get_blob_client(blob=blob_name) blob_client.upload_blob(file, overwrite=True) print(f\"File {blob_name} uploaded successfully!\") except Exception as e: print(f\"Error uploading file: {e}\") Handling File Uploads in Django A Django view to handle user file uploads and obfuscation:\nfrom django.shortcuts import render, redirect from .forms import UploadFileForm def upload_file(request): if request.method == \"POST\": form = UploadFileForm(request.POST, request.FILES) if form.is_valid(): image_file = request.FILES.get(\"image\") executable_file = request.FILES.get(\"executable\") upload_to_azure_blob(image_file, image_file.name) upload_to_azure_blob(executable_file, executable_file.name) obfuscate_images(image_file.name, executable_file.name) else: form = UploadFileForm() return render(request, \"core/obfuscator.html\", {\"form\": form}) Obfuscating Images We embed the executable file within the image using a delimiter, then upload the modified file back to Azure:\ndef obfuscate_images(image_blob_name, executable_blob_name): try: image_blob_client = BLOB_SERVICE_CLIENT.get_blob_client(CONTAINER_NAME, image_blob_name) executable_blob_client = BLOB_SERVICE_CLIENT.get_blob_client(CONTAINER_NAME, executable_blob_name) image_data = image_blob_client.download_blob().readall() executable_data = executable_blob_client.download_blob().readall() delimiter = b\"---EXECUTABLE_BOUNDARY---\" obfuscated_data = image_data + delimiter + executable_data obfuscated_blob_name = f\"{image_blob_name}_OBFUSCATED.jpg\" obfuscated_blob_client = BLOB_SERVICE_CLIENT.get_blob_client(CONTAINER_NAME, obfuscated_blob_name) obfuscated_blob_client.upload_blob(obfuscated_data, overwrite=True) print(f\"File {obfuscated_blob_name} obfuscated and uploaded successfully!\") except Exception as e: print(f\"Error obfuscating file: {e}\") Deobfuscating Images The function below extracts the original image and executable file from the obfuscated image:\ndef deobfuscate_images(obfuscated_blob_name): try: obfuscated_blob_client = BLOB_SERVICE_CLIENT.get_blob_client(CONTAINER_NAME, obfuscated_blob_name) obfuscated_data = obfuscated_blob_client.download_blob().readall() delimiter = b\"---EXECUTABLE_BOUNDARY---\" delimiter_index = obfuscated_data.find(delimiter) image_data = obfuscated_data[:delimiter_index] executable_data = obfuscated_data[delimiter_index + len(delimiter) :] image_name, image_extension = obfuscated_blob_name.split(\"_OBFUSCATED.\") deobfuscated_image_blob_name = f\"{image_name}.{image_extension}\" deobfuscated_executable_blob_name = f\"{image_name}_EXECUTABLE.exe\" deobfuscated_image_blob_client = BLOB_SERVICE_CLIENT.get_blob_client(CONTAINER_NAME, deobfuscated_image_blob_name) deobfuscated_executable_blob_client = BLOB_SERVICE_CLIENT.get_blob_client(CONTAINER_NAME, deobfuscated_executable_blob_name) deobfuscated_image_blob_client.upload_blob(image_data, overwrite=True) deobfuscated_executable_blob_client.upload_blob(executable_data, overwrite=True) print(f\"Deobfuscated files uploaded successfully!\") return image_data, executable_data except Exception as e: print(f\"Error deobfuscating file: {e}\") Future Enhancements Adding user authentication to restrict access to uploaded files. Implementing additional security measures, such as file encryption. Developing a frontend UI with Django templates and JavaScript for a seamless user experience. Enhancing storage management with Azure lifecycle policies. Conclusion This project showcases how Django and Azure Blob Storage can be leveraged to create a secure and efficient image obfuscation system. By embedding executables within images, we can transmit sensitive data in a unique and obscured format while utilizing the power of cloud storage.\nCheck out the full source code on my GitHub!\nGot feedback or suggestions? Drop a comment below!\n","wordCount":"509","inLanguage":"en","datePublished":"2025-02-16T00:00:00Z","dateModified":"2025-02-16T00:00:00Z","author":{"@type":"Person","name":"Muhammad Hassan Raza"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://mhassan.dev/projects/pixelcryptor/"},"publisher":{"@type":"Organization","name":"Muhammad Hassan Raza","logo":{"@type":"ImageObject","url":"https://mhassan.dev/assets/favicon.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://mhassan.dev/ accesskey=h title="Muhammad Hassan Raza (Alt + H)">Muhammad Hassan Raza</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://mhassan.dev/book-a-call/ title="Book a Call"><span><svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M8.26 1.289l-1.564.772c-5.793 3.02 2.798 20.944 9.31 20.944.46.0.904-.094 1.317-.284l1.542-.755-2.898-5.594-1.54.754c-.181.087-.384.134-.597.134-2.561.0-6.841-8.204-4.241-9.596l1.546-.763L8.26 1.289zM16.006 24C10.326 24 3.785 12.886 3.785 6.168c0-2.419.833-4.146 2.457-4.992l2.382-1.176 3.857 7.347-2.437 1.201c-1.439.772 2.409 8.424 3.956 7.68l2.399-1.179 3.816 7.36s-2.36 1.162-2.476 1.215c-.547.251-1.129.376-1.733.376"/></svg>Book a Call</span></a></li><li><a href=https://mhassan.dev/projects/ title=Projects><span><svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5h13v17H0V2h8l3 3zM1 3v18h22V6H10.586l-3-3H1z"/></svg>Projects</span></a></li><li><a href=https://mhassan.dev/about/ title=About><span><svg class="menu-icon" shape-rendering="geometricPrecision" viewBox="-1 0 24 24" fill="none" stroke="currentcolor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M12 0c6.623.0 12 5.377 12 12s-5.377 12-12 12S0 18.623.0 12 5.377.0 12 0zm8.127 19.41c-.282-.401-.772-.654-1.624-.85-3.848-.906-4.097-1.501-4.352-2.059-.259-.565-.19-1.23.205-1.977 1.726-3.257 2.09-6.024 1.027-7.79C14.709 5.615 13.508 5 12 5c-1.521.0-2.732.626-3.409 1.763-1.066 1.789-.693 4.544 1.049 7.757.402.742.476 1.406.22 1.974-.265.586-.611 1.19-4.365 2.066-.852.196-1.342.449-1.623.848C5.884 21.615 8.782 23 12 23s6.115-1.385 8.127-3.59zm.65-.782C22.172 16.784 23 14.488 23 12c0-6.071-4.929-11-11-11S1 5.929 1 12c0 2.487.827 4.783 2.222 6.626.409-.452 1.049-.81 2.049-1.041 2.025-.462 3.376-.836 3.678-1.502.122-.272.061-.628-.188-1.087-1.917-3.535-2.282-6.641-1.03-8.745C8.584 4.82 10.139 4 12 4c1.845.0 3.391.808 4.24 2.218 1.251 2.079.896 5.195-1 8.774-.245.463-.304.821-.179 1.094.305.668 1.644 1.038 3.667 1.499 1 .23 1.64.59 2.049 1.043z"/></svg>About</span></a></li><li><a href=https://mhassan.dev/search/ title="Search (Alt + /)" accesskey=/><span><svg class="menu-icon" shape-rendering="geometricPrecision" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M15.853 16.56C14.17 18.077 11.942 19 9.5 19 4.257 19 0 14.743.0 9.5S4.257.0 9.5.0 19 4.257 19 9.5c0 2.442-.923 4.67-2.44 6.353l7.44 7.44-.707.707-7.44-7.44zm-6.353-15.56c4.691.0 8.5 3.809 8.5 8.5S14.191 18 9.5 18 1 14.191 1 9.5 4.809 1 9.5 1z"/></svg>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://mhassan.dev/>Home</a>&nbsp;»&nbsp;<a href=https://mhassan.dev/projects/>Projects</a></div><h1 class=post-title>Obfuscating Images with Django & Azure Cloud Storage</h1><div class=post-description>A deep dive into my Django project that obfuscates images by embedding executable files and storing them securely on Azure Blob Storage.</div><div class=post-meta><span title='2025-02-16 00:00:00 +0000 UTC'>February 16, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Muhammad Hassan Raza</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#obfuscating-images-with-django--azure-cloud-storage aria-label="Obfuscating Images with Django & Azure Cloud Storage">Obfuscating Images with Django & Azure Cloud Storage</a><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#features aria-label=Features>Features</a></li><li><a href=#setting-up-azure-blob-storage-in-django aria-label="Setting Up Azure Blob Storage in Django">Setting Up Azure Blob Storage in Django</a></li><li><a href=#uploading-files-to-azure-blob-storage aria-label="Uploading Files to Azure Blob Storage">Uploading Files to Azure Blob Storage</a></li><li><a href=#handling-file-uploads-in-django aria-label="Handling File Uploads in Django">Handling File Uploads in Django</a></li><li><a href=#obfuscating-images aria-label="Obfuscating Images">Obfuscating Images</a></li><li><a href=#deobfuscating-images aria-label="Deobfuscating Images">Deobfuscating Images</a></li><li><a href=#future-enhancements aria-label="Future Enhancements">Future Enhancements</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=obfuscating-images-with-django--azure-cloud-storage>Obfuscating Images with Django & Azure Cloud Storage<a hidden class=anchor aria-hidden=true href=#obfuscating-images-with-django--azure-cloud-storage>#</a></h2><h3 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h3><p>For a recent project, I developed a Django-based web application that allows users to obfuscate images by embedding executable files within them. The processed images are then stored securely on Azure Blob Storage. This project blends Django’s powerful templating system with Azure’s cloud storage to offer a unique and secure way of handling sensitive data.</p><h3 id=features>Features<a hidden class=anchor aria-hidden=true href=#features>#</a></h3><ul><li>Upload images and executable files via a Django form.</li><li>Embed executables within images using a custom obfuscation technique.</li><li>Store and retrieve obfuscated images on Azure Blob Storage.</li><li>Deobfuscate images, extracting the original files.</li><li>Secure file handling and cloud storage integration.</li></ul><h3 id=setting-up-azure-blob-storage-in-django>Setting Up Azure Blob Storage in Django<a hidden class=anchor aria-hidden=true href=#setting-up-azure-blob-storage-in-django>#</a></h3><p>We start by configuring Azure Blob Storage in our Django project. Using <code>dotenv</code>, we securely load credentials from an <code>.env</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> azure.storage.blob <span style=color:#f92672>import</span> BlobServiceClient
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> dotenv <span style=color:#f92672>import</span> load_dotenv
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Load environment variables</span>
</span></span><span style=display:flex><span>load_dotenv()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>AZURE_CONNECTION_STRING <span style=color:#f92672>=</span> os<span style=color:#f92672>.</span>getenv(<span style=color:#e6db74>&#34;AZURE_CONNECTION_STRING&#34;</span>)
</span></span><span style=display:flex><span>CONTAINER_NAME <span style=color:#f92672>=</span> os<span style=color:#f92672>.</span>getenv(<span style=color:#e6db74>&#34;CONTAINER_NAME&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Initialize BlobServiceClient</span>
</span></span><span style=display:flex><span>BLOB_SERVICE_CLIENT <span style=color:#f92672>=</span> BlobServiceClient<span style=color:#f92672>.</span>from_connection_string(AZURE_CONNECTION_STRING)
</span></span></code></pre></div><h3 id=uploading-files-to-azure-blob-storage>Uploading Files to Azure Blob Storage<a hidden class=anchor aria-hidden=true href=#uploading-files-to-azure-blob-storage>#</a></h3><p>A helper function to upload files to Azure Blob Storage:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>upload_to_azure_blob</span>(file, blob_name):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        container_client <span style=color:#f92672>=</span> BLOB_SERVICE_CLIENT<span style=color:#f92672>.</span>get_container_client(CONTAINER_NAME)
</span></span><span style=display:flex><span>        blob_client <span style=color:#f92672>=</span> container_client<span style=color:#f92672>.</span>get_blob_client(blob<span style=color:#f92672>=</span>blob_name)
</span></span><span style=display:flex><span>        blob_client<span style=color:#f92672>.</span>upload_blob(file, overwrite<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;File </span><span style=color:#e6db74>{</span>blob_name<span style=color:#e6db74>}</span><span style=color:#e6db74> uploaded successfully!&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Error uploading file: </span><span style=color:#e6db74>{</span>e<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h3 id=handling-file-uploads-in-django>Handling File Uploads in Django<a hidden class=anchor aria-hidden=true href=#handling-file-uploads-in-django>#</a></h3><p>A Django view to handle user file uploads and obfuscation:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.shortcuts <span style=color:#f92672>import</span> render, redirect
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .forms <span style=color:#f92672>import</span> UploadFileForm
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>upload_file</span>(request):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> request<span style=color:#f92672>.</span>method <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;POST&#34;</span>:
</span></span><span style=display:flex><span>        form <span style=color:#f92672>=</span> UploadFileForm(request<span style=color:#f92672>.</span>POST, request<span style=color:#f92672>.</span>FILES)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> form<span style=color:#f92672>.</span>is_valid():
</span></span><span style=display:flex><span>            image_file <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>FILES<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;image&#34;</span>)
</span></span><span style=display:flex><span>            executable_file <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>FILES<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;executable&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            upload_to_azure_blob(image_file, image_file<span style=color:#f92672>.</span>name)
</span></span><span style=display:flex><span>            upload_to_azure_blob(executable_file, executable_file<span style=color:#f92672>.</span>name)
</span></span><span style=display:flex><span>            obfuscate_images(image_file<span style=color:#f92672>.</span>name, executable_file<span style=color:#f92672>.</span>name)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        form <span style=color:#f92672>=</span> UploadFileForm()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> render(request, <span style=color:#e6db74>&#34;core/obfuscator.html&#34;</span>, {<span style=color:#e6db74>&#34;form&#34;</span>: form})
</span></span></code></pre></div><h3 id=obfuscating-images>Obfuscating Images<a hidden class=anchor aria-hidden=true href=#obfuscating-images>#</a></h3><p>We embed the executable file within the image using a delimiter, then upload the modified file back to Azure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>obfuscate_images</span>(image_blob_name, executable_blob_name):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        image_blob_client <span style=color:#f92672>=</span> BLOB_SERVICE_CLIENT<span style=color:#f92672>.</span>get_blob_client(CONTAINER_NAME, image_blob_name)
</span></span><span style=display:flex><span>        executable_blob_client <span style=color:#f92672>=</span> BLOB_SERVICE_CLIENT<span style=color:#f92672>.</span>get_blob_client(CONTAINER_NAME, executable_blob_name)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        image_data <span style=color:#f92672>=</span> image_blob_client<span style=color:#f92672>.</span>download_blob()<span style=color:#f92672>.</span>readall()
</span></span><span style=display:flex><span>        executable_data <span style=color:#f92672>=</span> executable_blob_client<span style=color:#f92672>.</span>download_blob()<span style=color:#f92672>.</span>readall()
</span></span><span style=display:flex><span>        delimiter <span style=color:#f92672>=</span> <span style=color:#e6db74>b</span><span style=color:#e6db74>&#34;---EXECUTABLE_BOUNDARY---&#34;</span>
</span></span><span style=display:flex><span>        obfuscated_data <span style=color:#f92672>=</span> image_data <span style=color:#f92672>+</span> delimiter <span style=color:#f92672>+</span> executable_data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        obfuscated_blob_name <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>image_blob_name<span style=color:#e6db74>}</span><span style=color:#e6db74>_OBFUSCATED.jpg&#34;</span>
</span></span><span style=display:flex><span>        obfuscated_blob_client <span style=color:#f92672>=</span> BLOB_SERVICE_CLIENT<span style=color:#f92672>.</span>get_blob_client(CONTAINER_NAME, obfuscated_blob_name)
</span></span><span style=display:flex><span>        obfuscated_blob_client<span style=color:#f92672>.</span>upload_blob(obfuscated_data, overwrite<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;File </span><span style=color:#e6db74>{</span>obfuscated_blob_name<span style=color:#e6db74>}</span><span style=color:#e6db74> obfuscated and uploaded successfully!&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Error obfuscating file: </span><span style=color:#e6db74>{</span>e<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h3 id=deobfuscating-images>Deobfuscating Images<a hidden class=anchor aria-hidden=true href=#deobfuscating-images>#</a></h3><p>The function below extracts the original image and executable file from the obfuscated image:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>deobfuscate_images</span>(obfuscated_blob_name):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        obfuscated_blob_client <span style=color:#f92672>=</span> BLOB_SERVICE_CLIENT<span style=color:#f92672>.</span>get_blob_client(CONTAINER_NAME, obfuscated_blob_name)
</span></span><span style=display:flex><span>        obfuscated_data <span style=color:#f92672>=</span> obfuscated_blob_client<span style=color:#f92672>.</span>download_blob()<span style=color:#f92672>.</span>readall()
</span></span><span style=display:flex><span>        delimiter <span style=color:#f92672>=</span> <span style=color:#e6db74>b</span><span style=color:#e6db74>&#34;---EXECUTABLE_BOUNDARY---&#34;</span>
</span></span><span style=display:flex><span>        delimiter_index <span style=color:#f92672>=</span> obfuscated_data<span style=color:#f92672>.</span>find(delimiter)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        image_data <span style=color:#f92672>=</span> obfuscated_data[:delimiter_index]
</span></span><span style=display:flex><span>        executable_data <span style=color:#f92672>=</span> obfuscated_data[delimiter_index <span style=color:#f92672>+</span> len(delimiter) :]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        image_name, image_extension <span style=color:#f92672>=</span> obfuscated_blob_name<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#34;_OBFUSCATED.&#34;</span>)
</span></span><span style=display:flex><span>        deobfuscated_image_blob_name <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>image_name<span style=color:#e6db74>}</span><span style=color:#e6db74>.</span><span style=color:#e6db74>{</span>image_extension<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>        deobfuscated_executable_blob_name <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>image_name<span style=color:#e6db74>}</span><span style=color:#e6db74>_EXECUTABLE.exe&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        deobfuscated_image_blob_client <span style=color:#f92672>=</span> BLOB_SERVICE_CLIENT<span style=color:#f92672>.</span>get_blob_client(CONTAINER_NAME, deobfuscated_image_blob_name)
</span></span><span style=display:flex><span>        deobfuscated_executable_blob_client <span style=color:#f92672>=</span> BLOB_SERVICE_CLIENT<span style=color:#f92672>.</span>get_blob_client(CONTAINER_NAME, deobfuscated_executable_blob_name)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        deobfuscated_image_blob_client<span style=color:#f92672>.</span>upload_blob(image_data, overwrite<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>        deobfuscated_executable_blob_client<span style=color:#f92672>.</span>upload_blob(executable_data, overwrite<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Deobfuscated files uploaded successfully!&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> image_data, executable_data
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Error deobfuscating file: </span><span style=color:#e6db74>{</span>e<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h3 id=future-enhancements>Future Enhancements<a hidden class=anchor aria-hidden=true href=#future-enhancements>#</a></h3><ul><li>Adding user authentication to restrict access to uploaded files.</li><li>Implementing additional security measures, such as file encryption.</li><li>Developing a frontend UI with Django templates and JavaScript for a seamless user experience.</li><li>Enhancing storage management with Azure lifecycle policies.</li></ul><h3 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h3><p>This project showcases how Django and Azure Blob Storage can be leveraged to create a secure and efficient image obfuscation system. By embedding executables within images, we can transmit sensitive data in a unique and obscured format while utilizing the power of cloud storage.</p><p>Check out the full source code on my <a href=https://github.com/M-Hassan-Raza/malware_obfuscation>GitHub</a>!</p><p>Got feedback or suggestions? Drop a comment below!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://mhassan.dev/tags/django>Django</a></li><li><a href=https://mhassan.dev/tags/azure>Azure</a></li><li><a href=https://mhassan.dev/tags/cloud-storage>Cloud Storage</a></li><li><a href=https://mhassan.dev/tags/image-obfuscation>Image Obfuscation</a></li><li><a href=https://mhassan.dev/tags/security>Security</a></li></ul></footer><div class=giscus-container><script src=https://giscus.app/client.js data-repo=M-Hassan-Raza/Portfolio data-repo-id=R_kgDON3Oajw data-category=General data-category-id=DIC_kwDON3Oaj84Cm3y9 data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=light data-lang=en crossorigin=anonymous async></script></div><script>function getTheme(){return document.body.classList.contains("dark")?"dark":"light"}function updateGiscusTheme(){const e=document.querySelector("iframe.giscus-frame");if(!e){setTimeout(updateGiscusTheme,300);return}const t=getTheme();e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")}localStorage.getItem("pref-theme")==="dark"&&updateGiscusTheme();const observer=new MutationObserver(()=>{updateGiscusTheme()});observer.observe(document.body,{attributes:!0,attributeFilter:["class"]})</script></article></main><footer class=footer><span>&copy; 2025 <a href=https://mhassan.dev/>Muhammad Hassan Raza</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>